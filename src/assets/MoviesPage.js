import{r as t,u as y,j as e}from"./index.js";import{M as v}from"./MovieList.js";import{s as x}from"./api.js";const g=()=>{const[a,m]=t.useState([]),[l,n]=t.useState(!1),[c,u]=t.useState(null),[f,h]=y(),s=f.get("query")??"";t.useEffect(()=>{if(!s)return;(async()=>{try{n(!0),u(null);const o=await x(s);m(o),document.querySelector("form").reset(),document.querySelector("input").focus()}catch{u("Failed to fetch movies")}finally{n(!1)}})()},[s]);const d=r=>{r.preventDefault();const i=r.currentTarget.elements.query.value.trim();i!==""&&h({query:i})};return e.jsxs("div",{children:[e.jsxs("form",{onSubmit:d,children:[e.jsx("input",{type:"text",name:"query",autoFocus:!0}),e.jsx("button",{type:"submit",children:"Search"})]}),l&&e.jsx("div",{children:"Loading..."}),c&&e.jsx("div",{children:c}),a.length>0&&e.jsx(v,{movies:a})]})};export{g as default};
