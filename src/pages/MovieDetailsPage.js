import{b as u,r as t,a as _,j as e,L as a,O as f}from"./index.js";import{g as p,a as g}from"./api.js";const k="_container_1j81d_1",L="_backLink_1j81d_5",b="_movieInfo_1j81d_17",I="_poster_1j81d_23",N="_details_1j81d_29",w="_additional_1j81d_40",D="_error_1j81d_69",i={container:k,backLink:L,movieInfo:b,poster:I,details:N,additional:w,error:D},E=()=>{var l;const{movieId:n}=u(),[s,h]=t.useState(null),[v,r]=t.useState(!1),[o,c]=t.useState(null),m=_(),x=t.useRef(((l=m.state)==null?void 0:l.from)??"/movies");return t.useEffect(()=>{(async()=>{try{r(!0),c(null);const j=await g(n);h(j)}catch{c("Failed to fetch movie details")}finally{r(!1)}})()},[n]),v?e.jsx("div",{children:"Loading..."}):o?e.jsx("div",{className:i.error,children:o}):s?e.jsxs("div",{className:i.container,children:[e.jsx(a,{to:x.current,className:i.backLink,children:"← Go back"}),e.jsxs("div",{className:i.movieInfo,children:[e.jsx("img",{src:p(s.poster_path),alt:s.title,className:i.poster}),e.jsxs("div",{className:i.details,children:[e.jsxs("h2",{children:[s.title," (",new Date(s.release_date).getFullYear(),")"]}),e.jsxs("p",{children:["User Score: ",Math.round(s.vote_average*10),"%"]}),e.jsx("h3",{children:"Overview"}),e.jsx("p",{children:s.overview}),e.jsx("h3",{children:"Genres"}),e.jsx("p",{children:s.genres.map(d=>d.name).join(", ")})]})]}),e.jsxs("div",{className:i.additional,children:[e.jsx("h3",{children:"Additional information"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(a,{to:"cast",children:"Cast"})}),e.jsx("li",{children:e.jsx(a,{to:"reviews",children:"Reviews"})})]})]}),e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(f,{})})]}):null};export{E as default};
